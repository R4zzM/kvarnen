<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
    Remove this if you use the .htaccess -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>index</title>
    <meta name="description" content="" />
    <meta name="author" content="Rasmus Mattsson" />
    <meta name="viewport" content="width=device-width; initial-scale=1.0" />

    <!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

    <script type="text/javascript">
      function init() {
        var httpRequest = XMLHttpRequest();
        httpRequest.onreadystatechange = function() {
          if (httpRequest.readyState === 4) {
            if (!httpRequest.status === 200) {
              alert('Init request failed!');
            }
          }
        };
        httpRequest.open('GET', 'http://localhost:9000/init', true);
        httpRequest.send(null);
      }

function getSkills() { 

  var httpRequest = XMLHttpRequest();
  httpRequest.onreadystatechange = function() {
    if (httpRequest.readyState === 4) {
      printIntoSpanNode(httpRequest.responseText, "skillPrintArea"); //TODO change
    }
  };
  httpRequest.open('GET', 'http://localhost:9000/skills', true);
  httpRequest.send(null);      

}

function getEmployees() { 

  var httpRequest = XMLHttpRequest();
  httpRequest.onreadystatechange = function() {
    if (httpRequest.readyState === 4) {
      printIntoSpanNode(httpRequest.responseText, "employeePrintArea"); //TODO change
    }
  };
  httpRequest.open('GET', 'http://localhost:9000/employees', true);
  httpRequest.send(null);      
}

function printIntoSpanNode(text, spanId) {
  var spanNode = document.getElementById(spanId);
  while( spanNode.firstChild ) {
    spanNode.removeChild(spanNode.firstChild);
  }
  spanNode.appendChild(document.createTextNode(text)); 
}

</script>

  </head>

  <body onLoad="init()">
    <div>
      <header>
      <h1>Kvarnen</h1>
      </header>

      <div><p><a href="#" onClick="getEmployees()">personal</a></p></div>
      <span id="employeePrintArea"></span>
      <div id="skillsLink"><p><a href="#" onClick="getSkills()">positioner</a></p></div>
      <span id="skillPrintArea"></span>
      <nav>
      <p>
      <a href="add_employee.html">Lägg till personal</a>
      </p>
      <p>
      <a href="add_skill.html">Lägg till postion</a>
      </p>
      <p>
      <a href="generate_schedule.html">Generera schema</a>
      </p>
      </nav>

      <div>

      </div>

      <footer>
      <p>
      &copy; Copyright  by Rasmus Mattsson
      </p>
      </footer>
    </div>
  </body>
</html>
